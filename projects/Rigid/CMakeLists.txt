add_definitions(-DBT_THREAD_SAFE)
add_compile_options(-w)
add_subdirectory(bullet3)
add_subdirectory(HACD)

file (GLOB ZEN_RIGID_SOURCE *.cpp)
target_sources(zeno PRIVATE ${ZEN_RIGID_SOURCE})
target_include_directories(zeno PRIVATE .)
target_include_directories(zeno PRIVATE bullet3/src)

#if (UNIX)
    #set(CMAKE_LINK_WHAT_YOU_USE TRUE)
    #target_link_libraries(zeno PRIVATE -Wl,--whole-archive)
#endif()
set(BULLET_LIBS LinearMath Bullet3Common BulletInverseDynamics BulletCollision BulletDynamics BulletSoftBody)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:HACD>)
target_link_libraries(zeno PRIVATE ${BULLET_LIBS})
if (ZENO_INSTALL_TARGET)
    install(TARGETS ${BULLET_LIBS} EXPORT ZenoTargets)
endif()
# if (UNIX)
#     target_link_libraries(zeno PRIVATE -Wl,--no-whole-archive)
# endif()
